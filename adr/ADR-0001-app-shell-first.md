# ADR-0001: App Shell First

- Status: Accepted
- Date: 2025-09-21
- Deciders: Core Platform Team

## Контекст

Команда запускает первую версию GTrack как веб-приложение с обширной клиентской логикой. Важно обеспечить быстрый первый рендер, офлайн-доступ к критичным разделам и возможность независимого развития модулей.

## Решение

Применяем стратегию **App Shell First**:

- Строим минимальный каркас (shell) Next.js-приложения, который загружается мгновенно и содержит общие элементы интерфейса: верхнее меню, боковую навигацию, глобальные состояния.
- Используем инкрементальную подгрузку функциональных модулей через code splitting и lazy loading.
- Кэшируем shell через сервис-воркера, чтобы обеспечить быстрый повторный доступ и работу в нестабильной сети.
- Интерфейсы данных оборачиваем в контрактные хранилища (React Query/RTK Query) для унифицированной работы офлайн/онлайн.

## Последствия

- Shell можно разворачивать отдельно от функциональных модулей, что ускоряет первые релизы.
- Требуется строгая дисциплина в разделении ответственности: shell не должен содержать бизнес-логику.
- Сервис-воркер повышает сложность отладки, необходимы гайды для разработчиков и fallback-стратегии.
