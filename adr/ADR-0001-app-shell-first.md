# ADR-0001: App Shell First

- Status: Accepted
- Date: 2025-09-21
- Deciders: Core Platform Team

## Контекст

Команда запускает первую версию GTrack как веб-приложение с обширной клиентской логикой. Важно обеспечить быстрый первый рендер, офлайн-доступ к критичным разделам и возможность независимого развития модулей.

## Решение

Применяем стратегию **App Shell First**: сперва выпускаем каркас приложения, затем подключаем предметные модули.

- Этап 1 — shell: реализуем авторизацию (экран логина и сессию), базовый роутинг и навигацию, глобальные состояния, skeleton-страницы.
- Этап 2 — модули: бизнес-фичи подключаются последовательно и используют предоставленные shell API (layout, state, события).
- Используем инкрементальную подгрузку функциональных модулей через code splitting и lazy loading.
- Кэшируем shell через сервис-воркера, чтобы обеспечить быстрый повторный доступ и работу в нестабильной сети.
- Интерфейсы данных оборачиваем в контрактные хранилища (React Query/RTK Query) для унифицированной работы офлайн/онлайн.

## Последствия

- Shell можно разворачивать отдельно от функциональных модулей, что ускоряет первые релизы.
- Требуется строгая дисциплина в разделении ответственности: shell не должен содержать бизнес-логику.
- Сервис-воркер повышает сложность отладки, необходимы гайды для разработчиков и fallback-стратегии.
