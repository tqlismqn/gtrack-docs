# Модуль «Водители (Driver)» — RBAC & Маскирование v0.1

## Роли

- `admin` — полный доступ, override, legal hold, нотификационные настройки.
- `hr_lead` — старший HR: полные документы и полные банковские данные (read), скачивание разрешено.
- `hr` — документы полностью (без маски), банки только с маской; скачивание разрешено.
- `dispatcher` — операционные данные, маски на номера документов, без банков и без скачиваний.
- `accountant` — банковские данные полностью (R/W), документы с маской, без скачиваний.
- `driver(self)` — свои данные полностью, загрузка документов (state всегда `pending_approval`).

## Multi-Role & Groups

- `effectiveRoles = union(userRoles ∪ groupRoles)`.
- Если хотя бы одна роль даёт полномочие → оно доступно (R/W/D).

## Временные аппрувы (AccessRequest)

- `scopes`: `bank_full`, `doc_numbers_full` (read-only, без скачивания).
- `approver`: `hr_lead` или `admin`.
- Срок действия по умолчанию: 8 часов (ASSUMPTION).
- Нотификации: Inbox + e-mail; аудит всех раскрытий.

## Маскирование

- Документы/нац. ID: `****1234` (последние 4) — полностью видят `admin/hr/hr_lead/driver(self)`.
- Банковские реквизиты: полностью доступны `admin/accountant/hr_lead/driver(self)`; `hr` — с маской; остальные — без доступа.

## Скачивания вложений

- `admin/hr/hr_lead/driver(self)` (свои документы) — разрешено.
- Остальным запрещено; все скачивания логируются в AuditLog.
